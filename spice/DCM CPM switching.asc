Version 4
SHEET 1 1692 724
WIRE -432 -352 -544 -352
WIRE -128 -352 -352 -352
WIRE 128 -352 -128 -352
WIRE 512 -352 192 -352
WIRE 800 -352 512 -352
WIRE -128 -272 -128 -352
WIRE -544 -256 -544 -352
WIRE 512 -208 512 -352
WIRE 800 -208 800 -352
WIRE -32 -192 -80 -192
WIRE -128 -128 -128 -176
WIRE -128 -128 -304 -128
WIRE -128 -112 -128 -128
WIRE -544 16 -544 -176
WIRE -128 16 -128 -32
WIRE -128 16 -544 16
WIRE 192 16 -128 16
WIRE 512 16 512 -144
WIRE 512 16 192 16
WIRE 800 16 800 -128
WIRE 800 16 512 16
WIRE 192 48 192 16
WIRE -32 272 -32 -192
WIRE 288 272 -32 272
WIRE 704 272 432 272
WIRE 896 272 704 272
WIRE 288 320 192 320
WIRE 528 320 432 320
WIRE 704 368 704 272
WIRE 896 384 896 272
WIRE 704 528 704 448
WIRE 896 528 896 464
FLAG 192 48 0
FLAG -544 -352 in
FLAG 800 -352 out
FLAG 896 528 0
FLAG -304 -128 Isen
FLAG 528 320 Isen
FLAG 192 320 ramp
FLAG 704 528 0
SYMBOL voltage -544 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vg1
SYMATTR Value {Vin}
SYMBOL cap 496 -208 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL res 784 -224 R0
SYMATTR InstName R1
SYMATTR Value {Rload}
SYMBOL ind -448 -336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {Lb}
SYMATTR SpiceLine Rser=90m
SYMBOL CPM_modulator 368 304 M0
SYMATTR InstName U3
SYMATTR SpiceLine fs={fs}, Va={VSL}
SYMBOL nmos -80 -272 M0
SYMATTR InstName M1
SYMATTR Value BSC600N25NS3
SYMBOL diode 128 -336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res -144 -128 R0
SYMATTR InstName R2
SYMATTR Value {Rf}
SYMBOL current 896 464 M180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value {Vout*(1+(VSL*fs)/(Rf*Vin/Lb))*sqrt((1-Vin/Vout)*2/(Lb*Rload*fs))}
SYMBOL res 688 352 R0
SYMATTR InstName R3
SYMATTR Value {Rf}
TEXT -552 -456 Left 2 !.lib switching.lib
TEXT -552 -424 Left 2 !.lib average.lib
TEXT -576 216 Left 2 !.tran 20m startup uic
TEXT -576 88 Left 2 !.param Rf=85m fs=100k Lb=15u Vin=5 Vout=150 Rload=15k
TEXT -576 120 Left 2 !.param ma={(Vout-Vin)/Lb} VSL=92m
