Version 4
SHEET 1 1068 1508
WIRE -1776 -192 -2000 -192
WIRE -1712 -192 -1776 -192
WIRE -1536 -192 -1632 -192
WIRE -1456 -192 -1536 -192
WIRE -1264 -192 -1376 -192
WIRE -1008 -192 -1264 -192
WIRE -816 -192 -928 -192
WIRE -656 -192 -816 -192
WIRE -480 -192 -656 -192
WIRE -1776 -128 -1776 -192
WIRE -1536 -128 -1536 -192
WIRE -2000 -96 -2000 -192
WIRE -816 -48 -816 -192
WIRE -656 -48 -656 -192
WIRE -480 -48 -480 -192
WIRE -1264 -32 -1264 -192
WIRE -1200 -32 -1264 -32
WIRE -928 -32 -928 -192
WIRE -928 -32 -1072 -32
WIRE -1200 16 -1264 16
WIRE -1008 16 -1008 -192
WIRE -1008 16 -1072 16
WIRE -1776 32 -1776 -48
WIRE -1536 32 -1536 -48
WIRE -2000 176 -2000 -16
WIRE -1776 176 -1776 96
WIRE -1776 176 -2000 176
WIRE -1536 176 -1536 96
WIRE -1536 176 -1776 176
WIRE -1264 176 -1264 16
WIRE -1264 176 -1536 176
WIRE -944 176 -1264 176
WIRE -816 176 -816 16
WIRE -816 176 -944 176
WIRE -656 176 -656 32
WIRE -656 176 -816 176
WIRE -480 176 -480 32
WIRE -480 176 -656 176
WIRE -944 208 -944 176
WIRE -1136 384 -1136 32
WIRE -2448 464 -2448 336
WIRE -1888 544 -2064 544
WIRE -1728 544 -1888 544
WIRE -1680 544 -1728 544
WIRE -1600 544 -1680 544
WIRE -1376 544 -1520 544
WIRE -1232 544 -1232 496
WIRE -1232 544 -1376 544
WIRE -1040 544 -1040 496
WIRE -912 544 -1040 544
WIRE -2064 592 -2064 544
WIRE -1168 592 -1168 496
WIRE -1168 592 -1360 592
WIRE -1104 592 -1104 496
WIRE -912 592 -912 544
WIRE -2448 608 -2448 544
WIRE -2112 608 -2448 608
WIRE -1888 608 -1888 544
WIRE -1728 624 -1728 544
WIRE -2112 656 -2256 656
WIRE -2448 672 -2448 608
WIRE -1360 720 -1360 592
WIRE -2256 736 -2256 656
WIRE -2064 736 -2064 672
WIRE -1888 736 -1888 688
WIRE -1104 736 -1104 672
WIRE -912 736 -912 672
WIRE -1728 800 -1728 704
WIRE -2448 864 -2448 752
WIRE -2256 912 -2256 816
WIRE -1728 944 -1728 864
WIRE -1360 944 -1360 800
FLAG -944 208 0
FLAG -2000 -192 in
FLAG -656 -192 out
FLAG -2448 864 0
FLAG -2448 336 out
FLAG -2256 912 0
FLAG -2064 736 0
FLAG -1888 736 0
FLAG -1728 944 0
FLAG -1104 736 0
FLAG -1056 608 in
FLAG -1056 656 0
FLAG -912 736 0
FLAG -1360 944 0
FLAG -864 608 in
FLAG -864 656 out
FLAG -1376 544 x
FLAG -1680 544 y
SYMBOL voltage -2000 -112 R0
WINDOW 123 24 44 Left 2
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=30m
SYMATTR InstName Vg1
SYMATTR Value {Vin}
SYMBOL cap -832 -48 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL ind -1472 -176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {Lb}
SYMATTR SpiceLine Rser=90m
SYMBOL res -2464 448 R0
SYMATTR InstName R3
SYMATTR Value 1.5Meg
SYMBOL res -2464 656 R0
SYMATTR InstName R4
SYMATTR Value 12.7k
SYMBOL current -480 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(0 5m 3m 10u 10u 1m 10m 1)
SYMBOL voltage -2256 720 M0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=100
SYMATTR InstName Vref
SYMATTR Value 1.26
SYMBOL g2 -2064 576 R0
SYMATTR InstName G1
SYMATTR Value 800µ
SYMATTR Value2 table=(-.175, -140u) (.138, 110u)
SYMBOL res -1904 592 R0
SYMATTR InstName Rout
SYMATTR Value 47.5k
SYMBOL res -1744 608 R0
SYMATTR InstName R5
SYMATTR Value 4.3k
SYMBOL cap -1744 800 R0
SYMATTR InstName C2
SYMATTR Value 5.6n
SYMBOL cpm -1152 432 R0
SYMATTR SpiceLine Rf={Rf} Va={VSL}
SYMATTR SpiceLine2 L={Lb} fs={fs}
SYMATTR InstName U2
SYMATTR Value CPM-DCM
SYMBOL e -1104 576 M0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL e -912 576 M0
SYMATTR InstName E2
SYMATTR Value 1
SYMBOL h -1360 704 R0
WINDOW 3 17 127 Left 2
WINDOW 0 16 97 Left 2
SYMATTR Value value={Rf*i(L1)}
SYMATTR InstName Hsense1
SYMBOL ccm-dcm1 -1136 0 R0
SYMATTR SpiceLine L={Lb} fs={fs}
SYMATTR InstName U3
SYMBOL res -672 -64 R0
SYMATTR InstName R1
SYMATTR Value {Rload}
SYMBOL voltage -1504 544 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 60 56 VTop 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value ""
SYMATTR Value2 AC 1
SYMBOL ind -1728 -176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=50m
SYMBOL res -1552 -144 R0
SYMATTR InstName R2
SYMATTR Value 200m
SYMBOL res -1792 -144 R0
SYMATTR InstName R6
SYMATTR Value 500m
SYMBOL cap -1792 32 R0
SYMATTR InstName C3
SYMATTR Value 22µ
SYMATTR SpiceLine Rser=100m
SYMBOL cap -1552 32 R0
SYMATTR InstName C4
SYMATTR Value 100µ
SYMATTR SpiceLine Rser=45m
TEXT -1576 -296 Left 2 !.lib switching.lib
TEXT -1576 -264 Left 2 !.lib average.lib
TEXT -1600 376 Left 2 !;.tran 5m startup uic
TEXT -1600 248 Left 2 !.param Rf=41m fs=100k Lb=15u Vin=5 Vout=150 Rload=15k
TEXT -1600 280 Left 2 !.param VSL=111m
TEXT -1576 -328 Left 2 !.lib cpm-dcm.lib
TEXT -1600 408 Left 2 !.ac dec 300 1 1Meg
TEXT -912 336 Left 2 !.meas AC crossover FIND -v(y)/v(x) WHEN mag(-v(y)/v(x))=1
TEXT -912 304 Left 2 !;.step param Rload list 6k 15k 30k
